(function(){var t,n=function(t,n){return function(){return t.apply(n,arguments)}};t=function(){function t(t,i){this.showPanelAtIndex=n(this.showPanelAtIndex,this),this.showPanel=n(this.showPanel,this),this.end=n(this.end,this),this.start=n(this.start,this);var o;o={tutorial:[],interactive:!1,arrows:{weight:6,color:"white"},backdrop:!0,exitOnBackgroundClick:!1},this.tutorial=t,this.options=$.extend(!0,o,i),this.currentIndex=-1,this.container=null,this.canvas=null}return t.prototype.start=function(){var t;return t=this.options.backdrop?"rgba(0, 0, 0, 0.5)":"none",this.container=$("<div/>",{"class":"tutorial-backdrop",css:{background:t}}).appendTo($("body")),this.options.exitOnBackgroundClick&&this.container.click(this.end),this.container.append($("<a/>",{"class":"tutorial-close",html:"&#10006;"}).click(this.end)),this.canvas=$("<canvas/>",{"class":"tutorial-canvas"}).appendTo(this.container).attr("width",this.container.width()).attr("height",this.container.height())[0],this.showPanelAtIndex(0)},t.prototype.end=function(){return this.container.remove(),$(this.canvas).remove(),this.currentIndex=-1,this.container=null,this.canvas=null},t.prototype.showPanel=function(t){var n,i,o,e,s,r,a,h,l,c,u,p,d,f,v,w,g,x;for(g=t.annotations,x=[],v=0,w=g.length;w>v;v++)i=g[v],e=i.position.x,s=i.position.y,o=$("<div/>",{"class":"tutorial-annotation",css:{left:e,top:s}}).append($("<p/>",{html:i.text})).appendTo(this.container),i.arrow?(p=$(i.selector),x.push(function(){var t,i,v;for(v=[],t=0,i=p.length;i>t;t++)u=p[t],u=$(u),c=this.canvas.getContext("2d"),c.save(),c.beginPath(),r=e+o.outerWidth()/2,h=s+o.outerHeight()/2,c.moveTo(r,h),a=u.offset().left+u.width()/2,l=u.offset().top+u.height()/2,c.lineTo(a,l),c.strokeStyle=this.options.arrows.color,c.lineWidth=this.options.arrows.weight,c.stroke(),c.closePath(),f=(l-h)/(a-r),n=Math.atan(f),d=a>r?90:-90,n+=d*Math.PI/180,c.beginPath(),c.translate(a,l),c.rotate(n),c.moveTo(0,-10),c.lineTo(8,8),c.lineTo(-8,8),c.fillStyle=this.options.arrows.color,c.fill(),c.closePath(),v.push(c.restore());return v}.call(this))):x.push(void 0);return x},t.prototype.showPanelAtIndex=function(t){return this.showPanel(this.tutorial[t]),this.currentIndex=t},t}(),function(n){return n.tutorialize=function(n){var i;return null==n&&(n={}),i=n.tutorial,delete n.tutorial,new t(i,n)}}(jQuery)}).call(this);